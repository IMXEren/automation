<?xml version="1.0" encoding="UTF-8" ?>
<EventGhost Version="0.5.0-rc6">
    <Action Name="Start Join" XML_Guid="{82FD7B15-B238-4B0C-BE92-D7CC756B9E27}">
        EventGhost.PythonScript(u'class JoinRequest(object):\n    """Base Class for Requests to Join API"""\n\n    API_KEY = "ENTER HERE"\n    DEVICE = None\n    \n    class JoinApiError(BaseException):\n        """Error For Join API Requests"""\n\n    import urllib\n    import urllib2\n    import json\n\n    def __init__(self, **params):\n\n        params["apikey"] = self.API_KEY\n        params["deviceId"] = self.DEVICE\n\n        body = self.urllib.urlencode(params)\n\n        join_request = self.urllib2.urlopen(\n            "https://joinjoaomgcd.appspot.com/_ah/api/messaging/v1/sendPush",\n            data=body.encode()\n        )\n            \n        msg = self.json.loads(\n            join_request.read()\n        ).get("errorMessage", False)\n            \n        if msg:\n            raise self.JoinApiError(msg)\n        \n    @staticmethod\n    def register(*devices):\n        """Add devices to eg.globals"""\n        \n        for device in devices:\n            setattr(eg.globals, device.__name__, device)\n            print("ADDED: " + device.__name__ + "(**params)")\n        print("DONE")\n        \nclass JoinPushDeviceOne(JoinRequest):\n    DEVICE = "ENTER HERE"\n\t\nclass JoinPushDeviceTwo(JoinRequest):\n    DEVICE = "ENTER HERE"\n\nJoinRequest.register(\n\tJoinPushDeviceOne,\n\tJoinPushDeviceTwo\n\t)')
    </Action>
</EventGhost>